<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:include="fragments/header"></th:block>
<body>
    <th:block th:include="fragments/nav-bar"></th:block>
    <!-- 검색창 -->
    <form action="/book/list">
        <div class="form-row align-items-center">
            <div class="col-auto">
                <input type="search" class="form-control mb-2" name="query"
                       th:value="${books==null ? null : books.query}" placeholder="책 검색">
                <input type="hidden" name="start" value="1">
                <input type="hidden" name="display" value="10">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary mb-2">Submit</button>
            </div>
        </div>
    </form>

    <!-- 리스트 -->
    <table class="table table-horizontal table-bordered">
        <thead class="thead-strong">
        <tr>
            <th>제목</th>
            <th>이미지</th>
            <th>저자</th>
            <th>출판사</th>
            <th>링크</th>
            <th>isbn</th>
        </tr>
        </thead>
        <tbody th:if="${books != null}" id="tbody">
            <tr th:each="book:${books.items}">
                <td th:utext="${book.title}"></td>
                <td><img th:src="${book.image}" class="img-thumbnail" alt="..."></td>
                <td th:utext="${book.author}"></td>
                <td th:utext="${book.publisher}"></td>
                <td th:text="${book.link}"></td>
                <td th:text="${book.isbn}"></td>
            </tr>
        </tbody>
    </table>

    <!-- pagination -->
    <nav aria-label="Page navigation example">
        <ul th:if="${books != null}" class="pagination justify-content-start">
            <li th:if="${books.first == false}" class="page-item">
                <a class="page-link"
                   th:href="@{/book/list(query=${books.query}, start=${books.start-10}, display=10)}">Previous</a>
            </li>
            <li th:if="${books.first == true}" class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
            </li>
        </ul>
        <ul th:if="${books != null}" class="pagination justify-content-end">
            <li th:if="${books.last == false}" class="page-item">
                <a class="page-link"
                   th:href="@{/book/list(query=${books.query}, start=${books.start+10}, display=10)}">Next</a>
            </li>
            <li th:if="${books.last == true}" class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Next</a>
            </li>
        </ul>
    </nav>

    <th:block th:include="fragments/footer"></th:block>
</body>
</html>